{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst dataPicker = document.querySelector(`#datetime-picker`);\nconst btnStart = document.querySelector(`button[data-start]`);\nconst day = document.querySelector(`span[data-days]`);\nconst hour = document.querySelector(`span[data-hours]`);\nconst minute = document.querySelector(`span[data-minutes]`);\nconst second = document.querySelector(`span[data-seconds]`);\n\n\nlet intervalId = null;\nlet userDate = null;\n\nbtnStart.disabled = true;\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      const selectedDate = selectedDates[0];\n      const currentDate = new Date();\n      if (selectedDate <= currentDate) {\n        btnStart.disabled = true;\n        iziToast.error({\n          title: \"Error\",\n          message: \"Please choose a data in the future\",\n        });\n\n      } else {\n          userDate = selectedDate;\n          btnStart.disabled = false;\n          iziToast.success({\n            title: \"Ok\",\n            message: `You can press \"Start\"!`,\n        })\n        }\n    },\n};\n  \n\nflatpickr(dataPicker, options);\n\n\nbtnStart.addEventListener(\"click\", () => {\n  dataPicker.disabled = true;\n  btnStart.disabled = true;\n  intervalId = setInterval(() => {\n\n    const currentTime = new Date();\n    const diffences = userDate - currentTime;\n\n    if (diffences <= 0) {\n      clearInterval(intervalId);\n      btnStart.disabled = false;\n      dataPicker.disabled = false;\n      return;\n    }\n\n    \n    const time = convertMs(diffences);\n    updateTimerDisplay(time);\n\n  }, 1000);\n\n});\n\nfunction updateTimerDisplay({ days, hours, minutes, seconds }) {\n  day.textContent = String(days).padStart(2, `0`);\n  hour.textContent = String(hours).padStart(2, `0`);\n  minute.textContent = String(minutes).padStart(2, `0`);\n  second.textContent = String(seconds).padStart(2, `0`);\n};\n\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }"],"names":["dataPicker","btnStart","day","hour","minute","second","intervalId","userDate","options","selectedDates","selectedDate","iziToast","flatpickr","diffences","time","convertMs","updateTimerDisplay","days","hours","minutes","seconds","ms"],"mappings":"0IAKA,MAAMA,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAM,SAAS,cAAc,iBAAiB,EAC9CC,EAAO,SAAS,cAAc,kBAAkB,EAChDC,EAAS,SAAS,cAAc,oBAAoB,EACpDC,EAAS,SAAS,cAAc,oBAAoB,EAG1D,IAAIC,EAAa,KACbC,EAAW,KAEfN,EAAS,SAAW,GACpB,MAAMO,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EAEhCC,GADgB,IAAI,MAEtBT,EAAS,SAAW,GACpBU,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACnB,CAAS,IAGCJ,EAAWG,EACXT,EAAS,SAAW,GACpBU,EAAS,QAAQ,CACf,MAAO,KACP,QAAS,wBACZ,CAAA,EAEJ,CACL,EAGAC,EAAUZ,EAAYQ,CAAO,EAG7BP,EAAS,iBAAiB,QAAS,IAAM,CACvCD,EAAW,SAAW,GACtBC,EAAS,SAAW,GACpBK,EAAa,YAAY,IAAM,CAG7B,MAAMO,EAAYN,EADE,IAAI,KAGxB,GAAIM,GAAa,EAAG,CAClB,cAAcP,CAAU,EACxBL,EAAS,SAAW,GACpBD,EAAW,SAAW,GACtB,MACN,CAGI,MAAMc,EAAOC,EAAUF,CAAS,EAChCG,EAAmBF,CAAI,CAExB,EAAE,GAAI,CAET,CAAC,EAED,SAASE,EAAmB,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC7DlB,EAAI,YAAc,OAAOe,CAAI,EAAE,SAAS,EAAG,GAAG,EAC9Cd,EAAK,YAAc,OAAOe,CAAK,EAAE,SAAS,EAAG,GAAG,EAChDd,EAAO,YAAc,OAAOe,CAAO,EAAE,SAAS,EAAG,GAAG,EACpDd,EAAO,YAAc,OAAOe,CAAO,EAAE,SAAS,EAAG,GAAG,CACtD,CAGA,SAASL,EAAUM,EAAI,CAQnB,MAAMJ,EAAO,KAAK,MAAMI,EAAK,KAAG,EAE1BH,EAAQ,KAAK,MAAOG,EAAK,MAAO,IAAI,EAEpCF,EAAU,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,EAEjDD,EAAU,KAAK,MAASC,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAC5C"}